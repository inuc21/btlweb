<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- reset css -->
    <link rel="stylesheet" href="./css/reset.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- nhung font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap"
      rel="stylesheet"
    />
    <!-- nh√∫ng styles bootstrap -->
    <link
      rel="stylesheet"
      href="./node_modules/bootstrap/dist/css/bootstrap.min.css"
    />
    <!-- css -->
    <link rel="stylesheet" href="./css/style.css" />
    <title>Header</title>
  </head>
  <body style="height: 1984px">
    <!-- HEADER -->
    <header class="header">
      <div class="main_content">
        <div class="body_header">
          <!-- Logo -->
          <a href="./home.html">
            <img src="./img/Inuc.svg" alt="Logo" class="logo" />
          </a>

          <!-- DANH M·ª§C (Dropdown) -->
          <div class="dropdown">
            <button class="btn danhmuc_btn" id="toggleMenuBtn">
              <i class="fa-solid fa-bars"></i> Danh M·ª•c
            </button>
            <ul class="dropdown_menu grouped_menu" id="danhMucMenu">
              <li class="menu_group">
                <a href="ao.html" class="group_link">√ÅO</a>
                <ul>
                  <li><a href="aothun.html">√Åo thun</a></li>
                  <li><a href="aosomi.html">√Åo s∆° mi</a></li>
                  <li><a href="aohoodie.html">√Åo hoodie</a></li>
                  <li><a href="aokhoac.html">√Åo kho√°c</a></li>
                </ul>
              </li>
              <li class="menu_group">
                <a href="quan.html" class="group_link">QU·∫¶N</a>
                <ul>
                  <li><a href="quanjean.html">Qu·∫ßn jean</a></li>
                  <li><a href="quanshort.html">Qu·∫ßn short</a></li>
                  <li><a href="quanjogger.html">Qu·∫ßn jogger</a></li>
                </ul>
              </li>
              <li class="menu_group">
                <a href="boquanao.html" class="group_link">B·ªò QU·∫¶N √ÅO</a>
                <ul>
                  <li><a href="setnam.html">Set ƒë·ªì nam</a></li>
                  <li><a href="setnu.html">Set ƒë·ªì n·ªØ</a></li>
                </ul>
              </li>
            </ul>
          </div>

          <!-- T√¨m ki·∫øm -->
          <div class="search_box">
            <input type="text" placeholder="T√¨m ki·∫øm" />
            <i class="fa-solid fa-magnifying-glass"></i>
          </div>

          <!-- Icon ph·∫£i -->
          <div class="action_icons">
            <div class="icon_btn user-container" id="userContainer">
              <i class="fa-solid fa-user"></i>
              <div class="user-info" id="userInfo">
                <a href="signin.html"
                  ><span id="usernameDisplay">T√†i kho·∫£n</span></a
                >
                <a href="signin.html" id="logoutBtn">ƒêƒÉng xu·∫•t</a>
              </div>
            </div>

            <!-- Icon Gi·ªè H√†ng (n·∫±m trong header) -->
            <!-- Wrapper gi·ªè h√†ng -->
            <div class="cart_wrapper">
              <a href="#" class="icon_btn cart_icon" id="toggleCartBtn">
                <i class="fa-solid fa-cart-shopping"></i>
              </a>

              <!-- Dropdown Gi·ªè H√†ng tr∆∞·ª£t t·ª´ b√™n ph·∫£i -->
              <div class="cart_dropdown" id="cartDropdown">
                <h3>
                  <i class="fa-solid fa-cart-shopping"></i> GI·ªé H√ÄNG (<span
                    id="itemCount"
                    >3</span
                  >)
                </h3>
                <div class="cart_scroll_area">
                  <table class="cart_table">
                    <thead>
                      <tr>
                        <th>Ch·ªçn</th>
                        <th>S·∫£n Ph·∫©m</th>
                        <th>Gi√°</th>
                        <th>S·ªë L∆∞·ª£ng</th>
                        <th>X√≥a</th>
                      </tr>
                    </thead>
                    <tbody id="cartItems">
                      <tr>
                        <td>
                          <input
                            type="checkbox"
                            class="item_checkbox"
                            checked
                          />
                        </td>
                        <td>
                          <img src="./img/quan.webp" alt="Jean" />
                          <p>Qu·∫ßn Jeans Nam Dsquared2...</p>
                        </td>
                        <td class="price">8.000.000</td>
                        <td class="quantity">
                          <button class="qty-btn minus">-</button>
                          <input
                            type="number"
                            class="qty_input"
                            value="1"
                            min="1"
                          />
                          <button class="qty-btn plus">+</button>
                        </td>
                        <td><span class="remove">X</span></td>
                      </tr>
                      <tr>
                        <td>
                          <input
                            type="checkbox"
                            class="item_checkbox"
                            checked
                          />
                        </td>
                        <td>
                          <img src="./img/set3.webp" alt="Set Nike" />
                          <p>B·ªô Th·ªÉ Thao Nam Nike Men's...</p>
                        </td>
                        <td class="price">2.900.000</td>
                        <td class="quantity">
                          <button class="qty-btn minus">-</button>
                          <input
                            type="number"
                            class="qty_input"
                            value="1"
                            min="1"
                          />
                          <button class="qty-btn plus">+</button>
                        </td>
                        <td><span class="remove">X</span></td>
                      </tr>
                      <tr>
                        <td>
                          <input
                            type="checkbox"
                            class="item_checkbox"
                            checked
                          />
                        </td>
                        <td>
                          <img src="./img/nktech.webp" alt="Set Nike" />
                          <p>B·ªô ƒë·ªì th·ªÉ thao Nike x Syna...</p>
                        </td>
                        <td class="price">8.000.000</td>
                        <td class="quantity">
                          <button class="qty-btn minus">-</button>
                          <input
                            type="number"
                            class="qty_input"
                            value="1"
                            min="1"
                          />
                          <button class="qty-btn plus">+</button>
                        </td>
                        <td><span class="remove">X</span></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="cart_total">
                  <strong>T·ªïng C·ªông:</strong>
                  <span class="total_price" id="totalPrice">18.900.000</span>
                </div>
                <div class="cart_actions">
                  <button class="btn_gray" id="closeCartBtn">ƒê√≥ng</button>
                  <a href="./pay.html" class="btn_blue">TI·∫æP T·ª§C</a>
                </div>
              </div>
            </div>

            <a href="./ad1.html" class="icon_btn">
              <i class="fa-solid fa-gear"></i>
            </a>
          </div>
        </div>
      </div>
    </header>

    <div>
      <!-- CH·ªÆ CH·∫†Y -->
      <div class="chuchay">
        üîî ∆Øu ƒë√£i ƒë·∫∑c bi·ªát - Freeship to√†n qu·ªëc t·ª´ h√¥m nay ƒë·∫øn h·∫øt tu·∫ßn!
      </div>
    </div>
    <!-- nhung js bootstrap -->

    <script src="./node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <!-- <script src="./js/userDropdown.js"></script> -->

    <script>
      const toggleCartBtn = document.getElementById("toggleCartBtn");
      const cartDropdown = document.getElementById("cartDropdown");
      const closeCartBtn = document.getElementById("closeCartBtn");

      toggleCartBtn.addEventListener("click", function (e) {
        e.preventDefault();
        cartDropdown.classList.toggle("open");
      });

      closeCartBtn.addEventListener("click", function () {
        cartDropdown.classList.remove("open");
      });

      // T·ª± ƒë·ªông ƒë√≥ng n·∫øu click ra ngo√†i
      document.addEventListener("click", function (e) {
        if (
          !cartDropdown.contains(e.target) &&
          !toggleCartBtn.contains(e.target)
        ) {
          cartDropdown.classList.remove("open");
        }
      });
    </script>
    <script>
      // Toggle cart panel
      document
        .getElementById("toggleCartBtn")
        .addEventListener("click", function (e) {
          e.preventDefault();
          document.getElementById("cartDropdown").classList.toggle("active");
        });

      document
        .getElementById("closeCartBtn")
        .addEventListener("click", function () {
          document.getElementById("cartDropdown").classList.remove("active");
        });

      // X·ª≠ l√Ω c·ªông tr·ª´ s·ªë l∆∞·ª£ng
      document.querySelectorAll(".qty-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          const input = this.parentElement.querySelector(".qty_input");
          let value = parseInt(input.value);
          if (this.classList.contains("minus")) {
            value = value > 1 ? value - 1 : 1;
          } else {
            value += 1;
          }
          input.value = value;
          updateTotal();
        });
      });

      // X·ª≠ l√Ω checkbox v√† x√≥a
      document.querySelectorAll(".remove").forEach((removeBtn) => {
        removeBtn.addEventListener("click", function () {
          this.closest("tr").remove();
          updateTotal();
        });
      });

      document.querySelectorAll(".item_checkbox").forEach((cb) => {
        cb.addEventListener("change", updateTotal);
      });

      function updateTotal() {
        let total = 0;
        let itemCount = 0;

        document.querySelectorAll("#cartItems tr").forEach((row) => {
          const checkbox = row.querySelector(".item_checkbox");
          if (checkbox && checkbox.checked) {
            // L·∫•y gi√° tr·ªã v√† lo·∫°i b·ªè d·∫•u ch·∫•m
            const priceText = row
              .querySelector(".price")
              .textContent.replace(/\./g, "")
              .trim();
            const price = parseInt(priceText);

            const quantity = parseInt(row.querySelector(".qty_input").value);
            total += price * quantity;
            itemCount++;
          }
        });

        // C·∫≠p nh·∫≠t t·ªïng ti·ªÅn v√† s·ªë l∆∞·ª£ng s·∫£n ph·∫©m
        document.getElementById("totalPrice").textContent =
          total.toLocaleString("vi-VN") + " ƒë";
        document.getElementById("itemCount").textContent = itemCount;
      }

      updateTotal();
    </script>
    <script>
      const toggleMenuBtn = document.getElementById("toggleMenuBtn");
      const danhMucMenu = document.getElementById("danhMucMenu");

      toggleMenuBtn.addEventListener("click", function (e) {
        e.stopPropagation();
        danhMucMenu.classList.toggle("show_menu");
      });

      // ƒê√≥ng n·∫øu click ra ngo√†i
      document.addEventListener("click", function (e) {
        if (
          !danhMucMenu.contains(e.target) &&
          !toggleMenuBtn.contains(e.target)
        ) {
          danhMucMenu.classList.remove("show_menu");
        }
      });
    </script>
  </body>
</html>
