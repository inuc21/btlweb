<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- reset css -->
    <link rel="stylesheet" href="./css/reset.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- nhung font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap"
      rel="stylesheet"
    />
    <!-- nhúng styles bootstrap -->
    <link
      rel="stylesheet"
      href="./node_modules/bootstrap/dist/css/bootstrap.min.css"
    />
    <!-- css -->
    <link rel="stylesheet" href="./css/style.css" />
    <title>Home</title>
  </head>
  <body style="height: 1984px">
    <!-- Header -->
    <div include-html="./header.html"></div>

    <!-- main -->
    <main class="main_home">
      <div class="section-wrapper">
        <div class="slideshow-container">
          <img class="slide active" src="./img/centralcee.jpg" alt="Slide 1" />
          <img
            class="slide"
            src="./img/central-cee-cold-shoulder-mixtape-details.jpeg"
            alt="Slide 2"
          />
          <img class="slide" src="./img/PHUKIEN.png" alt="Slide 3" />

          <a class="prev" onclick="changeSlide(-1)">❮</a>
          <a class="next" onclick="changeSlide(1)">❯</a>
        </div>
      </div>

      <div class="main-wrapper">
        <div class="product-section">
          <a href="./newproduct.html" class="section-title">SẢN PHẨM MỚI</a>
          <div class="product-grid">
            <a href="details.html" class="product-item">
              <img src="./img/quan.webp" alt="Sản phẩm 1" />
              <p>Quần Jeans Nam Dsquared2 Relax Long Crotch ...</p>
              <span class="price">8.000.000</span>
            </a>
            <a href="details.html" class="product-item">
              <img src="./img/quan2.webp" alt="Sản phẩm 1" />
              <p>Quần Jeans Nam Dsquared2 Relax Long Crotch ...</p>
              <span class="price">8.000.000</span>
            </a>

            <a href="details.html" class="product-item">
              <img src="./img/set3.webp" alt="Sản phẩm 1" />
              <p>Quần Jeans Nam Dsquared2 Relax Long Crotch ...</p>
              <span class="price">8.000.000</span>
            </a>

            <a href="details.html" class="product-item">
              <img src="./img/set4.webp" alt="Sản phẩm 1" />
              <p>Quần Jeans Nam Dsquared2 Relax Long Crotch ...</p>
              <span class="price">8.000.000</span>
            </a>
          </div>

          <a href="./favoriteproduct.html" class="section-title"
            >SẢN PHẨM ĐƯỢC YÊU THÍCH</a
          >
          <div class="product-grid">
            <a href="details.html" class="product-item">
              <img src="./img/set5.webp" alt="Sản phẩm 1" />
              <p>Quần Jeans Nam Dsquared2 Relax Long Crotch ...</p>
              <span class="price">8.000.000</span>
            </a>

            <a href="details.html" class="product-item">
              <img src="./img/set6.webp" alt="Sản phẩm 1" />
              <p>Quần Jeans Nam Dsquared2 Relax Long Crotch ...</p>
              <span class="price">8.000.000</span>
            </a>

            <a href="details.html" class="product-item">
              <img src="./img/set7.webp" alt="Sản phẩm 1" />
              <p>Quần Jeans Nam Dsquared2 Relax Long Crotch ...</p>
              <span class="price">8.000.000</span>
            </a>

            <a href="details.html" class="product-item">
              <img src="./img/nktech.webp" alt="Sản phẩm 1" />
              <p>Quần Jeans Nam Dsquared2 Relax Long Crotch ...</p>
              <span class="price">8.000.000</span>
            </a>
          </div>
        </div>
        <div class="category-container">
          <a href="muahe.html" class="category-item">
            <img src="./img/shorts.jpg" alt="Mùa Hè" />
            <span class="category-title">Mùa Hè</span>
          </a>

          <a href="muadong.html" class="category-item">
            <img src="./img/muadong.png" alt="Mùa Đông" />
            <span class="category-title">Mùa Đông</span>
          </a>
        </div>
      </div>
    </main>
    <!-- Footer -->
    <div include-html="./footer.html"></div>
    <!-- JS -->
    <script src="./node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    >
    <script>
      const toggleCartBtn = document.getElementById("toggleCartBtn");
      const cartDropdown = document.getElementById("cartDropdown");
      const closeCartBtn = document.getElementById("closeCartBtn");

      toggleCartBtn.addEventListener("click", function (e) {
        e.preventDefault();
        cartDropdown.classList.toggle("open");
      });

      closeCartBtn.addEventListener("click", function () {
        cartDropdown.classList.remove("open");
      });

      // Tự động đóng nếu click ra ngoài
      document.addEventListener("click", function (e) {
        if (
          !cartDropdown.contains(e.target) &&
          !toggleCartBtn.contains(e.target)
        ) {
          cartDropdown.classList.remove("open");
        }
      });
    </script>
    <script>
      // Toggle cart panel
      document
        .getElementById("toggleCartBtn")
        .addEventListener("click", function (e) {
          e.preventDefault();
          document.getElementById("cartDropdown").classList.toggle("active");
        });

      document
        .getElementById("closeCartBtn")
        .addEventListener("click", function () {
          document.getElementById("cartDropdown").classList.remove("active");
        });

      // Xử lý cộng trừ số lượng
      document.querySelectorAll(".qty-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          const input = this.parentElement.querySelector(".qty_input");
          let value = parseInt(input.value);
          if (this.classList.contains("minus")) {
            value = value > 1 ? value - 1 : 1;
          } else {
            value += 1;
          }
          input.value = value;
          updateTotal();
        });
      });

      // Xử lý checkbox và xóa
      document.querySelectorAll(".remove").forEach((removeBtn) => {
        removeBtn.addEventListener("click", function () {
          this.closest("tr").remove();
          updateTotal();
        });
      });

      document.querySelectorAll(".item_checkbox").forEach((cb) => {
        cb.addEventListener("change", updateTotal);
      });

      function updateTotal() {
        let total = 0;
        let itemCount = 0;

        document.querySelectorAll("#cartItems tr").forEach((row) => {
          const checkbox = row.querySelector(".item_checkbox");
          if (checkbox && checkbox.checked) {
            // Lấy giá trị và loại bỏ dấu chấm
            const priceText = row
              .querySelector(".price")
              .textContent.replace(/\./g, "")
              .trim();
            const price = parseInt(priceText);

            const quantity = parseInt(row.querySelector(".qty_input").value);
            total += price * quantity;
            itemCount++;
          }
        });

        // Cập nhật tổng tiền và số lượng sản phẩm
        document.getElementById("totalPrice").textContent =
          total.toLocaleString("vi-VN") + " đ";
        document.getElementById("itemCount").textContent = itemCount;
      }

      updateTotal();
    </script>
    <script>
      const toggleMenuBtn = document.getElementById("toggleMenuBtn");
      const danhMucMenu = document.getElementById("danhMucMenu");

      toggleMenuBtn.addEventListener("click", function (e) {
        e.stopPropagation();
        danhMucMenu.classList.toggle("show_menu");
      });

      // Đóng nếu click ra ngoài
      document.addEventListener("click", function (e) {
        if (
          !danhMucMenu.contains(e.target) &&
          !toggleMenuBtn.contains(e.target)
        ) {
          danhMucMenu.classList.remove("show_menu");
        }
      });
    </script>
    <script>
      let slideIndex = 0;
      const slides = document.querySelectorAll(".slide");
      let autoSlideInterval;

      function showSlide(index) {
        slides.forEach((slide, i) => {
          slide.classList.remove("active");
          if (i === index) {
            slide.classList.add("active");
          }
        });
      }

      function changeSlide(n) {
        slideIndex += n;
        if (slideIndex >= slides.length) slideIndex = 0;
        if (slideIndex < 0) slideIndex = slides.length - 1;
        showSlide(slideIndex);
        resetAutoSlide(); // khi người dùng click thì reset lại thời gian tự động
      }

      function autoSlide() {
        slideIndex++;
        if (slideIndex >= slides.length) slideIndex = 0;
        showSlide(slideIndex);
      }

      function resetAutoSlide() {
        clearInterval(autoSlideInterval);
        autoSlideInterval = setInterval(autoSlide, 4000);
      }

      // Bắt đầu slideshow tự động
      showSlide(slideIndex);
      autoSlideInterval = setInterval(autoSlide, 2500);
    </script>
  </body>
</html>
